
import { LitElement,html,css,createRef,ref } from "https://cdn.jsdelivr.net/gh/lit/dist@2/all/lit-all.min.js";
export class ExChatMessage extends LitElement{static properties={message:{type:String},};render(){return html`<p>${this.message}</p>`;}constructor(){super();}}customElements.define("ex-chat-message",ExChatMessage);
export class ExPage extends LitElement{static properties={content:{type:String},};registerEventListener(){ListenEvent("RenderPage",(payload)=>{const{content}=payload;delete payload.content;data=payload;this.content=document.createRange().createContextualFragment(content);if(first_page){clearInterval(first_page);first_page=null;}});}render(){return html`<div>${this.content}</div>`;}constructor(){super();this.registerEventListener();setTimeout(()=>{window.Component("page",this.shadowRoot);});}}customElements.define("ex-page",ExPage);
export class ExChat extends LitElement{static properties={data:{type:Array},messagesRef:{type:HTMLUListElement},messageInputRef:{type:HTMLInputElement},};static styles=css`ul{height:300px;overflow-y:scroll;}`;registerEvents(){ListenEvent("NewMessage",(payload)=>{this.data=[...this.data,payload.message];setTimeout(()=>{this.messagesRef.value.scrollTop=this.messagesRef.value.scrollHeight;},1);});EmitEvent("RegisterRoom",{room:data.page,});}messageInputCallback(el){el.onclick=()=>{const value=this.messageInputRef.value.value;if(!value)return;EmitEvent("NewMessage",{room:data.page,message:value});this.messageInputRef.value.value="";};}render(){return html`<hr/><ul ${ref(this.messagesRef)}>${this.data.map((item)=>{return html`<ex-chat-message message=${item}></ex-chat-message>`;})}</ul><hr/><input
${ref(this.messageInputRef)}type="text"placeholder="Digite algo..."/><button ${ref(this.messageInputCallback)}>Enviar</button><hr/>`;}constructor(){super();this.data=[];this.messagesRef=createRef();this.messageInputRef=createRef();this.registerEvents();}}customElements.define("ex-chat",ExChat);
export class ExButton extends LitElement{static properties={clickCount:{type:Number},};callback(el){el.onclick=()=>{this.clickCount++;};}render(){return html`<button ${ref(this.callback)}>${this.clickCount}</button>`;}constructor(){super();this.clickCount=0;}}customElements.define("ex-button",ExButton);
